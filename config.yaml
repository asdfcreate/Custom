mixed-port: 7897
allow-lan: false
mode: rule
log-level: info
external-controller: 0.0.0.0:9090 
find-process-mode: strict 
tcp-concurrent: true
ipv6: false
global-client-fingerprint: chrome

geodata-mode: true
geox-url:
  geoip: "https://github.com/soffchen/sing-geoip/releases/latest/download/geoip-cn.db"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.db"
  mmdb: "https://raw.githubusercontent.com/soffchen/geoip/release/Country-only-cn-private.mmdb"
  
profile:
  store-selected: true
  store-fake-ip: true 

sniffer:               
  enable: true
  parse-pure-ip: true 
  sniff:
    TLS:            
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    QUIC:
      ports: [443, 8443]

dns:
  enable: true
  prefer-h3: false
  ipv6: false
  listen: 0.0.0.0:53
  default-nameserver:
      - system
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter: ['*.lan', 'cable.auth.com', '*.msftconnecttest.com', '*.msftncsi.com', 'network-test.debian.org', 'detectportal.firefox.com', 'resolver1.opendns.com', '*.srv.nintendo.net', '*.stun.playstation.net', 'xbox.*.microsoft.com', '*.xboxlive.com', 'stun.*', 'global.turn.twilio.com', 'global.stun.twilio.com', 'localhost.*.qq.com', 'localhost.*.weixin.qq.com', '*.logon.battlenet.com.cn', '*.logon.battle.net', '*.blzstatic.cn', 'music.163.com', '*.music.163.com', '*.126.net', 'musicapi.taihe.com', 'music.taihe.com', 'songsearch.kugou.com', 'trackercdn.kugou.com', '*.kuwo.cn', 'api-jooxtt.sanook.com', 'api.joox.com', 'joox.com', 'y.qq.com', '*.y.qq.com', 'streamoc.music.tc.qq.com', 'mobileoc.music.tc.qq.com', 'isure.stream.qqmusic.qq.com', 'dl.stream.qqmusic.qq.com', 'aqqmusic.tc.qq.com', 'amobile.music.tc.qq.com', '*.xiami.com', '*.music.migu.cn', 'music.migu.cn', 'proxy.golang.org', '*.mcdn.bilivideo.cn', '*.cmpassport.com', 'id6.me', 'open.e.189.cn', 'mdn.open.wo.cn', 'opencloud.wostore.cn', 'auth.wosms.cn', '*.jegotrip.com.cn', '*.icitymobile.mobi', '*.pingan.com.cn', '*.cmbchina.com', 'pool.ntp.org', '*.pool.ntp.org', 'ntp.*.com', 'time.*.com', 'ntp?.*.com', 'time?.*.com', 'time.*.gov', 'time.*.edu.cn', '*.ntp.org.cn', 'PDC._msDCS.*.*', 'DC._msDCS.*.*', 'GC._msDCS.*.*']  
  nameserver:
      - 223.5.5.5
      - 114.114.114.114
      - 119.29.29.29

proxy-providers:
    subscribe_groups:
        type: http 
        url: ""
        interval: 86400 
        path: ./config.yaml
        health-check:
            enable: true
            interval: 83214
            url: http://connectivitycheck.gstatic.com/generate_204

proxy-groups:    
    - name: "Proxy"
      use:
          - subscribe_groups 
          
    - name: "Youtube"
      type: select
      proxies:
          - "Proxy"
      use:
          - subscribe_groups  
          
    - name: "Telegram"
      type: select
      proxies:
          - "Proxy"
      use:
          - subscribe_groups  
                
    - name: "Spotify"
      type: select
      proxies:
          - "Proxy"
      use:
          - subscribe_groups  
          
    - name: "Twitter"
      type: select
      proxies:
          - "Proxy"
      use:
          - subscribe_groups 
            
    - name: "GoogleFCM"
      type: select
      proxies:
          - "Proxy"
      use:
          - subscribe_groups  
          
    - name: "GoogleVoice"
      type: select
      proxies:
          - "Proxy"
      use:
          - subscribe_groups  
          
    - name: "GoogleServices"
      type: select
      proxies:
          - "Proxy"
      use:
          - subscribe_groups  
        
    - name: "OpenAI"
      type: select
      proxies:
          - "Proxy"
      use:
          - subscribe_groups           
    
    - name: "Tiktok"
      type: select
      proxies:
          - "Proxy"
      use:
          - subscribe_groups        
             
    - name: "FINAL"
      type: select
      proxies:
          - "Proxy"
          - "Direct"                

rule-providers:     
    Reject_Custom:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/asdfcreate/Custom_Rule/master/Reject_Custom.list"  
  
    Reject_MIUI_Custom:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/asdfcreate/Custom_Rule/master/Reject_MIUI_Custom.list"  
        
    sogouinput:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://ruleset.skk.moe/Clash/non_ip/sogouinput.txt"  
        
    BlockHttpDNS:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BlockHttpDNS/BlockHttpDNS.list"  
        
    Advertising:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising.list"  
        
    YouTube:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.list"  
        
    Telegram:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list"  
        
    Telegram_Custom:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/asdfcreate/Custom_Rule/master/Telegram_Custom.list"  

    Spotify:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list"  
        
    Twitter:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.list"  
        
    GoogleFCM:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GoogleFCM/GoogleFCM.list"  
        
    GoogleVoice:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GoogleVoice/GoogleVoice.list"  
        
    GoogleServices:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/asdfcreate/Custom_Rule/master/Google_Services.list"  
        
    OpenAI:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.list"  
        
    ChatGPT_Voice:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://gitlab.com/lodepuly/vpn_tool/raw/master/Tool/Loon/Rule/ChatGPT_Voice.list"  

    OpenAI_Custom:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/asdfcreate/Custom_Rule/master/OpenAI_Custom.list"  

    OpenAI_Custom:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/asdfcreate/Custom_Rule/master/OpenAI_Custom.list"  
        
    OpenAI_Custom:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/asdfcreate/Custom_Rule/master/OpenAI_Custom.list"  
        
    OpenAI_Custom:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/asdfcreate/Custom_Rule/master/OpenAI_Custom.list"  

    TikTok:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.list"  
        
    LocalAreaNetwork:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list"  
        
    Direct_Custom:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/asdfcreate/Custom_Rule/master/Direct_Custom.list" 

    Lan:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://github.com/Repcz/Tool/raw/X/Clash/Rules/Lan.list" 

    Proxy_Custom:
        type: http
        behavior: classical    
        format: text
        interval: 86400
        url: "https://raw.githubusercontent.com/asdfcreate/Custom_Rule/master/Proxy_Custom.list"  

rules:
    - SCRIPT,quic,REJECT
    - RULE-SET,Reject_Custom,REJECT    
    - RULE-SET,Reject_MIUI_Custom,REJECT
    - RULE-SET,sogouinput,REJECT
    - RULE-SET,BlockHttpDNS,REJECT
    - RULE-SET,Advertising,REJECT   

    - RULE-SET,YouTube,YouTube
    - RULE-SET,Telegram,Telegram      
    - RULE-SET,Telegram_Custom,Telegram   
    - RULE-SET,Spotify,Spotify   
    - RULE-SET,Twitter,Twitter
    
    - RULE-SET,GoogleFCM,GoogleFCM
    - RULE-SET,GoogleVoice,GoogleVoice
    - RULE-SET,GoogleServices,GoogleServices
    - RULE-SET,Twitter,Twit ter  OpenAI 
    - RULE-SET,Twitter,Twitter
    - RULE-SET,Twitter,Twitter
    - RULE-SET,Twitter,Twitter
    - RULE-SET,Twitter,Twitter


    - RULE-SET,Lan,DIRECT
    - RULE-SET,icloud,DIRECT
    - RULE-SET,apple,DIRECT
    - GEOSITE,onedrive,DIRECT
    - GEOSITE,microsoft@cn,DIRECT 
    - GEOSITE,steam@cn,DIRECT
    - GEOSITE,category-games@cn,DIRECT 
    - MATCH,[]FINAL

script:
  shortcuts:
    quic: network == 'udp' and dst_port == 443

